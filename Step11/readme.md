# Занятие № 11
**Дата блокировки**

Цель:
- Закрепить опыт работы с шаблоном `Прототип`, `Фабрика`
- Закрепить опыт работы с ООП
 
## Выполнить
* Добавить настройку `settings.json`
        - `Первый старт`. По умолчанию **True**
	- `Дата блокировки`. Тип `datetime`
  При изменении данного параметра **False** не генерировать тестовые данные, а загружать из источника.
  Дата блокировки используется для подготовки **готовых расчетных** данных.
* Добавить новые RestApi методы
        - `POST` - Сохранить все данные в файл из репозитория в источник (файл)
        - `POST` - Восстановить все данные из файла (источника) в репозиторий
	- `GET` - получить дату блокировки

## Задание
1. Реализовать метод для расчета оборотв за период `1900-01-01` до `block_period` (Дата блокировки) 
   Сделать реализацию в виде отдельного процесса по аналогии с обычным расчетом оборотов. 
   Сделать сохранения результатов расчета оборотов до даты блокировки. Значение даты блокировки хранить в настройках `settings_model`
2. Изменить процесс расчета оборотов с учетом даты блокировки. При расчете оборотов до даты блокировки использовать сохраненные значения оборотов. 
   Например:
 	- Дата блокировки = `2024-01-01`
	- Берем готовые сохраненные обороты до `2024-01-01`
	- Рассчитываем обороты с `2024-01-01` по указанную дату.
	- Агрегируем обороты
3. Написать модульный тест для проверки расчетов. При изменении даты блокировки конечный результат не должен изменится.
4. Написать нагрузочный тест. Создать 1000 (и более) транзакций. Сделать замеры по времени расчета при разных вариантах даты блокировки. 
   Результаты выложить в виде Markdown файла или картинки
5. Написать `POST` запрос который будет менять дату блокировки в настройках `settings_model`

